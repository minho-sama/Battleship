(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{17:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){},23:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n.n(r),o=n(10),i=n.n(o),c=(n(17),n(18),n(11)),s=n(6),l=n(12),h=n(3),d=(n(19),function(t){var e={board:[],shipsLeft:!0,owner:t,lastShot:{hit:!1,location:!1}};0===e.board.length&&function(){for(var t=0;t<100;t++)e.board.push({ship:!1,beenHit:!1})}();var n=function(){var t,n=Object(s.a)(e.board);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!1!==r.ship&&!r.beenHit)return void(e.shipsLeft=!0)}}catch(a){n.e(a)}finally{n.f()}e.shipsLeft=!1};return{boardInfo:e,receiveHit:function(t){e.board[t].beenHit=!0,e.board[t].ship&&(e.lastShot.hit=!0,e.lastShot.location=t),n()},placeShip:function(t,n){if(t.isVertical)for(var r=0;r<t.length;r++)e.board[n+10*r].ship=t.id;else for(var a=0;a<t.length;a++)e.board[n+a].ship=t.id},allShipsSunk:n}}),b=function(t){var e={name:t,shots:[]},n=function(){for(var t=r(100);e.shots.includes(t);)t=r(100);return e.shots.push(t),t},r=function(t){return Math.floor(Math.random()*t)};return{playerInfo:e,AI:function(t){if(t.hit){for(var a=function(t){var e;switch(r(4)){case 0:e=t.location+1;break;case 1:e=t.location-1;break;case 2:e=t.location+10;break;case 3:e=t.location-10}return e},o=a(t),i=0,c=!0;e.shots.includes(o)||o>99||o<0;)if(o=a(t),40===++i){c=!1;break}return i=0,c?(e.shots.push(o),o):n()}return n()},getRandMove:n,resetShots:function(){e.shots.length=0}}},u=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=Array(e),o=function(t){a[t]="x"},i=function(){return a.every((function(t){return"x"===t}))},c=function(t){var r=[];if(n)for(var a=0;a<e;a++)r.push(t+10*a);else for(var o=0;o<e;o++)r.push(t+o);return r};return{id:t,length:e,isVertical:n,startCoord:r,hitLocations:a,hit:o,isSunk:i,takenCells:c}},f=n(7),j=n(9),p=n(1),O=function(){var t=Object(r.useState)(!1),e=Object(h.a)(t,2),n=e[0],a=e[1],o=Object(r.useState)((function(){return d("player")})),i=Object(h.a)(o,2),c=i[0],O=i[1],v=Object(r.useState)((function(){return d("ai")})),g=Object(h.a)(v,2),x=g[0],m=g[1],S=Object(r.useState)([]),C=Object(h.a)(S,2),y=C[0],I=C[1],k=Object(r.useState)([]),M=Object(h.a)(k,2),w=M[0],H=M[1],N=Object(r.useState)(!0),B=Object(h.a)(N,2),F=B[0],L=B[1],A=Object(r.useState)((function(){return b("ai")})),V=Object(h.a)(A,2),z=V[0],D=V[1],E=Object(r.useState)(void 0),P=Object(h.a)(E,2),T=P[0],J=P[1];function Y(){G("player"),G("ai")}function G(t){var e=[],n=[];do{for(e=[],n=[];e.length<5;)for(var r=1;r<6;r++){var a,o=Math.floor(100*Math.random()),i=u(r,r,Math.random()>.5,o);if(i.isVertical&&i.startCoord+10*(i.length-1)>99)for(;i.startCoord+10*i.length>99;)i.startCoord=Math.floor(100*Math.random());else if(i.startCoord+i.length>99)for(;i.startCoord+i.length>99;)i.startCoord=Math.floor(100*Math.random());if(!i.isVertical&&i.startCoord+i.length>10*Math.ceil((i.startCoord+1)/10))for(;i.startCoord+i.length>10*Math.ceil((i.startCoord+1)/10);)i.startCoord=Math.floor(Math.random()*(100-i.length));(a=n).push.apply(a,Object(l.a)(i.takenCells(i.startCoord))),e.push(i)}}while(n.length!==new Set(n).size);"player"===t?I(e):"ai"===t&&H(e)}function R(t,e){for(var n=0;n<t.length;n++)e.placeShip(t[n],t[n].startCoord)}function W(t){return t.beenHit&&t.ship?"red-ai":t.beenHit&&!t.ship?"blue-ai":"white-ai"}function _(t){return t.ship&&t.beenHit?"red":!t.ship&&t.beenHit?"blue":t.ship?"white":void 0}function q(t,e){"ai"===t?(x.boardInfo.board[e].beenHit=!0,m(Object(j.cloneDeep)(x))):(c.boardInfo.board[e].beenHit=!0,c.boardInfo.board[e].ship?(c.boardInfo.lastShot.hit=!0,c.boardInfo.lastShot.location=e):c.boardInfo.lastShot.hit=!1,O(Object(j.cloneDeep)(c)),Q(c)?J("ai"):Q(x)&&J("player"))}function K(t,e){if("ai"===t&&F){if(!0===x.boardInfo.board[e].beenHit)return;q("ai",e),L(!F)}else if("player"===t&&!F)return setTimeout((function(){q("playerBoard",e)}),250),L(!F),!0}R(y,c),R(w,x),Object(r.useEffect)((function(){var t;F||(t=z.AI(c.boardInfo.lastShot),F||K("player",t))}),[F]);var Q=function(t){var e,n=Object(s.a)(t.boardInfo.board);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!1!==r.ship&&!r.beenHit)return!1}}catch(a){n.e(a)}finally{n.f()}return!0};return n&&void 0===T?Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"board-container",children:[Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{children:"Your board"}),Object(p.jsx)("div",{className:"board player-board",children:c.boardInfo.board.map((function(t,e){return Object(p.jsx)("div",{className:"cell player-cell ".concat(_(t))},e)}))})]}),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{children:"Enemy's board"}),Object(p.jsx)("div",{className:"board ai-board",children:x.boardInfo.board.map((function(t,e){return Object(p.jsx)("div",{className:"cell ai-cell ".concat(W(t)),onClick:function(){return K("ai",e)}},e)}))})]})]})}):n&&void 0!==T?Object(p.jsxs)("div",{className:"winnerBanner",children:["ai"===T?Object(p.jsx)("h1",{children:"Game Over! AI won!"}):Object(p.jsx)("h1",{children:"Congratz! You won!"}),Object(p.jsx)("button",{onClick:function(){return J(void 0),O((function(){return d("player")})),m((function(){return d("ai")})),D((function(){return b("ai")})),L(!0),void Y()},children:"Play Again"})]}):n?void 0:Object(p.jsxs)("div",{className:"welcome-board",children:[Object(p.jsx)("button",{className:"start",onClick:function(){return a(!n),void Y()},children:"Start game"}),Object(p.jsx)("p",{children:"Sink all enemy ships to win!"}),Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{id:"white-grid",children:[Object(p.jsx)(f.a,{})," Ship"]}),Object(p.jsxs)("li",{id:"blue-grid",children:[Object(p.jsx)(f.a,{})," Water"]}),Object(p.jsxs)("li",{id:"red-grid",children:[Object(p.jsx)(f.a,{})," Hit"]})]})]})};var v=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("h1",{children:"Battleship"}),Object(p.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/minho-sama/Battleship",children:Object(p.jsx)(c.a,{id:"git-icon",size:"40px"})})]}),Object(p.jsx)(O,{})]})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root")),g()}},[[23,1,2]]]);
//# sourceMappingURL=main.83bc1c8f.chunk.js.map